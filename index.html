<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <title>Camera to PDF Web App</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <script src="https://unpkg.com/browser-image-compression/dist/browser-image-compression.js"></script>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="container">
    <h2>Camera PDF Generator</h2>
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas" style="display:none;"></canvas>
    
    <!-- Cropping Container -->
    <div id="cropContainer" class="crop-container" style="display:none;">
      <div class="crop-header">
        <h3>Crop Your Image</h3>
        <p>Drag to select the area you want to keep</p>
        <p class="crop-shortcuts">Shortcuts: Enter=Crop, S=Skip, R=Reset, Esc=Cancel</p>
      </div>
      <div class="crop-wrapper">
        <img id="cropImage" alt="Image to crop" />
        <div id="cropOverlay" class="crop-overlay">
          <div id="cropSelection" class="crop-selection">
            <div class="crop-handle nw"></div>
            <div class="crop-handle ne"></div>
            <div class="crop-handle sw"></div>
            <div class="crop-handle se"></div>
            <div class="crop-handle n"></div>
            <div class="crop-handle s"></div>
            <div class="crop-handle e"></div>
            <div class="crop-handle w"></div>
          </div>
        </div>
      </div>
      <div class="crop-buttons">
        <button id="cropConfirm" class="crop-btn confirm">Crop & Continue</button>
        <button id="cropSkip" class="crop-btn skip">Skip Crop</button>
        <button id="cropCancel" class="crop-btn cancel">Cancel</button>
        <button id="cropReset" class="crop-btn reset">Reset Selection</button>
      </div>
    </div>

    <!-- Mobile Pinch-Zoom Cropping Container -->
    <div id="mobileCropContainer" class="mobile-crop-container" style="display:none;">
      <div class="mobile-crop-header">
        <h3>Adjust & Crop</h3>
        <p>Pinch to zoom, drag to move. Area inside the frame will be kept.</p>
        
      </div>
      <div class="mobile-crop-canvas-wrapper">
        <canvas id="mobileCropCanvas"></canvas>
        <div class="mobile-crop-frame"></div>
      </div>
      <div class="mobile-crop-buttons">
        <button id="mobileCropConfirm" class="crop-btn confirm">Crop & Continue</button>
        <button id="mobileCropSkip" class="crop-btn skip">Skip</button>
        <button id="mobileCropCancel" class="crop-btn cancel">Cancel</button>
        <button id="mobileCropReset" class="crop-btn reset">Reset</button>
      </div>
    </div>
    
    <img id="preview" alt="Captured Image Preview" style="display:none;" />
    <div class="inputs">
      <input type="number" id="minSize" placeholder="Min KB (default: 50)" min="1" value="50" />
      <input type="number" id="maxSize" placeholder="Max KB (default: 300)" min="1" value="300" />
      <input type="text" id="fileName" placeholder="PDF File Name (optional)" />
    </div>
    <button id="switchBtn">Switch Camera</button>
    <button id="captureBtn">Capture</button>
    <button id="downloadBtn" disabled>Download PDF</button>
    <div id="status"></div>
  </div>
  <script src="app.js"></script>
</body>
</html>
